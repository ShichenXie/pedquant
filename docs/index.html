<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Public Economic Data and Quantitative Analysis • pedquant</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Public Economic Data and Quantitative Analysis">
<meta property="og:description" content="
    Provides an interface to access public economic and financial data for 
    economic research and quantitative analysis. The data sources including 
    NBS, FRED, 163, Sina, Eastmoney and etc. It also provides quantitative 
    functions for trading strategies based on the data.table, TTR, PerformanceAnalytics
    and etc packages.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-home">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">pedquant</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="http://shichen.name/donate/" class="external-link">
    <span class="fa fa-money fa-lg"></span>
     
    donate
  </a>
</li>
<li>
  <a href="https://github.com/ShichenXie/pedquant" class="external-link">
    <span class="fa fa-github fa-lg"></span>
     
    github
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div class="section level1">
<div class="page-header"><h1 id="pedquant">pedquant<a class="anchor" aria-label="anchor" href="#pedquant"></a>
</h1></div>

<p><code>pedquant</code> (Public Economic Data and QUANTitative analysis) provides an interface to access public economic and financial data for economic research and quantitative analysis. The functions are grouped into three main categories,</p>
<ul>
<li>ed_* (economic data) functions load economic data from <a href="http://www.stats.gov.cn/" class="external-link">NBS</a> and <a href="https://fred.stlouisfed.org/" class="external-link">FRED</a>;</li>
<li>md_* (market data) functions load the forex, money, bond, stock, future market data from public data sources, including 163, Sina, qq finance and etc.</li>
<li>pq_* (quantitative analysis) functions create technical indicators, visualization charts and industrial index etc for time series data.</li>
</ul>
<p>The functions in this package are designed to write minimum codes for some common tasks in quantitative analysis process. Since the parameters to get data can be interactively specify, it’s very easy to start. The loaded data have been carefully cleansed and provided in a unified format.</p>
<p><code>pedquant</code> package has advantages on multiple aspects, such as the format of loaded data is a list of data frames, which can be easily manipulated in <a href="https://rdatatable.gitlab.io/data.table" class="external-link">data.table</a> or <a href="https://www.tidyverse.org" class="external-link">tidyverse</a> packages; high performance on speed by using <a href="https://rdatatable.gitlab.io/data.table" class="external-link">data.table</a> and <a href="https://github.com/joshuaulrich/TTR" class="external-link">TTR</a>; and interactive charts by using <a href="https://echarts4r.john-coene.com/" class="external-link">echarts4r</a>. Similar works including <a href="https://github.com/business-science/tidyquant" class="external-link">tidyquant</a> or <a href="https://github.com/joshuaulrich/quantmod" class="external-link">quantmod</a>.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<ul><li>Install the release version of <code>pedquant</code> from CRAN with:</li></ul>
<!-- --><div class="sourceCode" id="cb1"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"pedquant"</span>)</span></code></pre></div>
<ul><li>Install the developing version of <code>pedquant</code> from <a href="https://github.com/shichenXie/pedquant" class="external-link">github</a> with:</li></ul>
<!-- --><div class="sourceCode" id="cb2"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">"shichenxie/pedquant"</span>)</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p>The following examples show you how to import data.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(pedquant)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="do">## import eocnomic data</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>dat1 <span class="ot">=</span> <span class="fu">ed_fred</span>(<span class="st">'GDPCA'</span>)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1/1 GDPCA</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>dat2 <span class="ot">=</span> <span class="fu">ed_nbs</span>(<span class="at">geo_type=</span><span class="st">'nation'</span>, <span class="at">freq=</span><span class="st">'quarterly'</span>, <span class="at">symbol=</span><span class="st">'A010101'</span>)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="do">## import market data</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>FAAG <span class="ot">=</span> <span class="fu">md_stock</span>(<span class="fu">c</span>(<span class="st">'FB'</span>, <span class="st">'AMZN'</span>, <span class="st">'AAPL'</span>, <span class="st">'GOOG'</span>), <span class="at">date_range =</span> <span class="st">'10y'</span>)</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1/4 fb</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2/4 amzn</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3/4 aapl</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4/4 goog</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>INDX <span class="ot">=</span> <span class="fu">md_stock</span>(<span class="fu">c</span>(<span class="st">'^000001'</span>,<span class="st">'^399001'</span>), <span class="at">date_range =</span> <span class="st">'10y'</span>)</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1/2 ^000001</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2/2 ^399001</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a><span class="co"># moving average crossover strategy</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.table)</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a><span class="co"># load data</span></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">"dt_banks"</span>)</span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>dtboc <span class="ot">=</span> <span class="fu">md_stock_adjust</span>(<span class="fu">setDT</span>(dt_banks)[symbol<span class="sc">==</span><span class="st">'601988.SS'</span>])</span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a><span class="co"># added technical indicators</span></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>bocti <span class="ot">=</span> <span class="fu">pq_addti</span>(dtboc, <span class="at">x=</span><span class="st">'close_adj'</span>, <span class="at">sma=</span><span class="fu">list</span>(<span class="at">n=</span><span class="dv">200</span>), <span class="at">sma=</span><span class="fu">list</span>(<span class="at">n=</span><span class="dv">50</span>))</span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a><span class="co"># crossover signal </span></span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a>dtorders <span class="ot">=</span> <span class="fu">copy</span>(bocti[[<span class="dv">1</span>]])[,.(symbol, name, date, close_adj, sma_50, sma_200)</span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a> ][sma_50 <span class="sc">%x&gt;%</span> sma_200, <span class="st">`</span><span class="at">:=</span><span class="st">`</span>(</span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">type =</span> <span class="st">'buy'</span>, <span class="at">prices =</span> close_adj</span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a>)][sma_50 <span class="sc">%x&lt;%</span> sma_200, <span class="st">`</span><span class="at">:=</span><span class="st">`</span>(</span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">type =</span> <span class="st">'sell'</span>, <span class="at">prices =</span> close_adj</span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a>)][<span class="fu">order</span>(date)</span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a> ][, (<span class="fu">c</span>(<span class="st">'type'</span>, <span class="st">'prices'</span>)) <span class="sc">:</span><span class="er">=</span> <span class="fu">lapply</span>(.SD, shift), .SDcols <span class="ot">=</span> <span class="fu">c</span>(<span class="st">'type'</span>, <span class="st">'prices'</span>)]</span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dtorders[<span class="sc">!</span><span class="fu">is.na</span>(type)])</span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;       symbol     name       date close_adj   sma_50  sma_200 type   prices</span></span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1: 601988.SS 中国银行 2009-04-27  2.175686 2.159212 2.154464  buy 2.169398</span></span>
<span id="cb3-37"><a href="#cb3-37" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2: 601988.SS 中国银行 2010-03-23  2.682837 2.685811 2.690783 sell 2.689302</span></span>
<span id="cb3-38"><a href="#cb3-38" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3: 601988.SS 中国银行 2010-05-06  2.618190 2.695508 2.694150  buy 2.669908</span></span>
<span id="cb3-39"><a href="#cb3-39" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4: 601988.SS 中国银行 2010-05-20  2.514756 2.677794 2.679346 sell 2.521220</span></span>
<span id="cb3-40"><a href="#cb3-40" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5: 601988.SS 中国银行 2011-04-27  2.332291 2.302393 2.299774  buy 2.318449</span></span>
<span id="cb3-41"><a href="#cb3-41" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6: 601988.SS 中国银行 2011-07-21  2.231820 2.285567 2.288007 sell 2.239067</span></span>
<span id="cb3-42"><a href="#cb3-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-43"><a href="#cb3-43" aria-hidden="true" tabindex="-1"></a><span class="co"># charting</span></span>
<span id="cb3-44"><a href="#cb3-44" aria-hidden="true" tabindex="-1"></a>e <span class="ot">=</span> <span class="fu">pq_plot</span>(dtboc,  <span class="at">y=</span><span class="st">'close_adj'</span>, <span class="at">addti =</span> <span class="fu">list</span>(<span class="at">sma=</span><span class="fu">list</span>(<span class="at">n=</span><span class="dv">200</span>), <span class="at">sma=</span><span class="fu">list</span>(<span class="at">n=</span><span class="dv">50</span>)), <span class="at">orders =</span> dtorders[<span class="sc">!</span><span class="fu">is.na</span>(type)])</span>
<span id="cb3-45"><a href="#cb3-45" aria-hidden="true" tabindex="-1"></a>e[[<span class="dv">1</span>]]</span>
<span id="cb3-46"><a href="#cb3-46" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; NULL</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="issues-and-contributions">Issues and Contributions<a class="anchor" aria-label="anchor" href="#issues-and-contributions"></a>
</h2>
<p>This package still on the developing stage. If you have any issue when using this package, please update to the latest version from github. If the issue still exists, report it at <a href="https://github.com/ShichenXie/pedquant/issues" class="external-link">github page</a>. Contributions in any forms to this project are welcome.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=pedquant" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/ShichenXie/pedquant/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/ShichenXie/pedquant/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://www.r-project.org/Licenses/GPL-3" class="external-link">GPL-3</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing pedquant</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Shichen Xie <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://travis-ci.org/ShichenXie/pedquant" class="external-link"><img src="https://travis-ci.org/ShichenXie/pedquant.svg?branch=master" alt="Travis build status"></a></li>
<li><a href="https://cran.r-project.org/package=pedquant" class="external-link"><img src="https://www.r-pkg.org/badges/version/pedquant" alt="CRAN status"></a></li>
<li><a href="https://cran.r-project.org/package=pedquant" class="external-link"><img src="http://cranlogs.r-pkg.org/badges/grand-total/pedquant"></a></li>
<li><a href="https://cran.r-project.org/package=pedquant" class="external-link"><img src="http://cranlogs.r-pkg.org/badges/pedquant"></a></li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by Shichen Xie.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
